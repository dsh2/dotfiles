# General settings
activity "activity in %n (%t) [%w:%s]~"
autodetach on
bell "%C -> %n%f %t activity!"
bufferfile $HOME/.screen/exchange
caption always "%-w%{+b}%n %t%{-b}%+w"
crlf off
defmonitor on
defscrollback 65535
defslowpaste 0
escape ^zz
hardcopydir $HOME/.screen/hardcopies/
hardstatus off
ignorecase on
log on
logfile $HOME/.screen/logs/%n
log flush 1
msgminwait 1
msgwait 1
multiuser off
obuflimit 4096
shell -$SHELL
shelltitle '$|'
silencewait 15
startup_message off
vbell off

# Key bindings
bind k
bind ^k
bind .
bind ^\
bind \\
bind ^h
bind h
bind 'K' kill

# Previous buffer - Meta-1
bindkey "^[1" prev
bindkey "^[2" next
bindkey "^[3" other
bindkey "^[4" eval "copy"
# bindkey "^[~" prev
# bindkey "^[`" next

# Save in vim and relaunch in other window
bindkey "^[0" eval "stuff :w^m" other "stuff ^p^m"

# Multi-window setup
bindkey "^[q" focus
bindkey "^[w" split
bindkey "^[a" resize +2
bindkey "^[z" resize -2
bindkey "^[s" resize =

# New window - Meta-n
bindkey "^[n" screen

# New spilt window - Meta-m
bindkey "^[m" eval "split" "focus" "screen"

# Continue search backwards and forward copy modes
bindkey -m "^[p" stuff ?^m
bindkey -m "^[n" stuff /^m

bindkey "^[P" paste .

# To be determined
bindkey "^[[5;2~" eval "copy" "stuff ^u"
bindkey -m "^[[5;2~" stuff ^u
bindkey -m "^[[6;2~" stuff ^d

# Function keys
bindkey -k k2 windowlist -b -m
bindkey -k k4 windowlist -b -m
bindkey -k k5 eval "echo 'Reloading .screenrc...'" "source $HOME/.screenrc" "echo 'Reloaded .screenrc.'"
bindkey -k k6 title
bindkey -k k7 screen
bindkey -k k8 remove
bindkey -k k9 colon

# Scroll back to beginning of output of the last command - Meta-p
# bindkey "^[p" eval "copy" "msgwait 0" "msgminwait 0" "copy" "stuff 0?##^m" "msgminwait 1" "msgwait 1"
bindkey "^[p" eval "copy" "msgwait 0" "msgminwait 0" "copy" "stuff 0?dsf@^m0" "msgminwait 1"

source ${HOME}.screenrc.${MYHOSTNAME}
